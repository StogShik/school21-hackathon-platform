<%- include('../partials/header.ejs', { title: 'Личный кабинет', user: user }) %>
<h1>Личный кабинет</h1>
<p>Привет, <%= user.username %>!</p>
<h2>Твоя команда</h2>
<% if (teams.length > 0) { %>
  <div class="list-group">
    <% teams.forEach(team => { %>
      <a href="/team/<%= team._id %>" class="list-group-item list-group-item-action">
          <strong><%= team.name %></strong>
          <% if (team.githubLink) { %>
             <br>GitHub: <%= team.githubLink %>
          <% } %>
      </a>
    <% }); %>
  </div>
<% } else { %>
  <p>Ты не состоишь ни в одной команде.</p>
  <div class="mb-3">
    <a href="/team/create" class="btn btn-success">Создать новую команду</a>
  </div>
<% } %>
<h2>Приглашения</h2>
<% if (invitations && invitations.length > 0) { %>
  <ul class="list-group mb-4">
    <% invitations.forEach(invite => { %>
      <li class="list-group-item">
        Приглашение от <strong><%= invite.inviter.username %></strong> в команду <strong><%= invite.team.name %></strong>.
        <div class="mt-2">
          <form action="/invitations/<%= invite._id %>/accept" method="POST" style="display:inline;">
            <button type="submit" class="btn btn-success btn-sm">Принять</button>
          </form>
          <form action="/invitations/<%= invite._id %>/decline" method="POST" style="display:inline;">
            <button type="submit" class="btn btn-danger btn-sm">Отклонить</button>
          </form>
        </div>
      </li>
    <% }); %>
  </ul>
<% } else { %>
  <p>У вас нет новых приглашений.</p>
<% } %>
<%- include('../partials/footer.ejs') %>
